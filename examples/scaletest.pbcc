%{
  volatile __thread int trash;
%}

transform ScaleTest
from IN[n] 
to OUT[n] 
{
  to(OUT o) from(IN i) {
    if(n<=1){
      for(trash=0; trash<100000000; ++trash);
      return;
    }
    SPAWN(ScaleTest, o.region(0, n/2), i.region(0, n/2));
    SPAWN(ScaleTest, o.region(n/2, n), i.region(n/2, n));
  }
}

